{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import React from'react';import View from\"react-native-web/dist/exports/View\";import Animated from\"react-native-web/dist/exports/Animated\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Keyboard from\"react-native-web/dist/exports/Keyboard\";import Platform from\"react-native-web/dist/exports/Platform\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{NavigationContext,NavigationRouteContext,CommonActions,useTheme}from'@react-navigation/native';import{SafeAreaConsumer}from'react-native-safe-area-context';import BottomTabItem from\"./BottomTabItem\";var DEFAULT_TABBAR_HEIGHT=50;var DEFAULT_MAX_TAB_ITEM_WIDTH=125;var useNativeDriver=Platform.OS!=='web';export default function BottomTabBar(_ref){var state=_ref.state,navigation=_ref.navigation,descriptors=_ref.descriptors,activeBackgroundColor=_ref.activeBackgroundColor,activeTintColor=_ref.activeTintColor,_ref$adaptive=_ref.adaptive,adaptive=_ref$adaptive===void 0?true:_ref$adaptive,allowFontScaling=_ref.allowFontScaling,inactiveBackgroundColor=_ref.inactiveBackgroundColor,inactiveTintColor=_ref.inactiveTintColor,_ref$keyboardHidesTab=_ref.keyboardHidesTabBar,keyboardHidesTabBar=_ref$keyboardHidesTab===void 0?false:_ref$keyboardHidesTab,labelPosition=_ref.labelPosition,labelStyle=_ref.labelStyle,showIcon=_ref.showIcon,showLabel=_ref.showLabel,style=_ref.style,tabStyle=_ref.tabStyle;var _useTheme=useTheme(),colors=_useTheme.colors;var _React$useState=React.useState(Dimensions.get('window')),_React$useState2=_slicedToArray(_React$useState,2),dimensions=_React$useState2[0],setDimensions=_React$useState2[1];var _React$useState3=React.useState({height:0,width:dimensions.width}),_React$useState4=_slicedToArray(_React$useState3,2),layout=_React$useState4[0],setLayout=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),keyboardShown=_React$useState6[0],setKeyboardShown=_React$useState6[1];var _React$useState7=React.useState(function(){return new Animated.Value(1);}),_React$useState8=_slicedToArray(_React$useState7,1),visible=_React$useState8[0];var routes=state.routes;React.useEffect(function(){if(keyboardShown){Animated.timing(visible,{toValue:0,duration:200,useNativeDriver:useNativeDriver}).start();}},[keyboardShown,visible]);React.useEffect(function(){var handleOrientationChange=function handleOrientationChange(_ref2){var window=_ref2.window;setDimensions(window);};var handleKeyboardShow=function handleKeyboardShow(){return setKeyboardShown(true);};var handleKeyboardHide=function handleKeyboardHide(){return Animated.timing(visible,{toValue:1,duration:250,useNativeDriver:useNativeDriver}).start(function(_ref3){var finished=_ref3.finished;if(finished){setKeyboardShown(false);}});};Dimensions.addEventListener('change',handleOrientationChange);if(Platform.OS==='ios'){Keyboard.addListener('keyboardWillShow',handleKeyboardShow);Keyboard.addListener('keyboardWillHide',handleKeyboardHide);}else{Keyboard.addListener('keyboardDidShow',handleKeyboardShow);Keyboard.addListener('keyboardDidHide',handleKeyboardHide);}return function(){Dimensions.removeEventListener('change',handleOrientationChange);if(Platform.OS==='ios'){Keyboard.removeListener('keyboardWillShow',handleKeyboardShow);Keyboard.removeListener('keyboardWillHide',handleKeyboardHide);}else{Keyboard.removeListener('keyboardDidShow',handleKeyboardShow);Keyboard.removeListener('keyboardDidHide',handleKeyboardHide);}};},[visible]);var handleLayout=function handleLayout(e){var _e$nativeEvent$layout=e.nativeEvent.layout,height=_e$nativeEvent$layout.height,width=_e$nativeEvent$layout.width;setLayout(function(layout){if(height===layout.height&&width===layout.width){return layout;}else{return{height:height,width:width};}});};var shouldUseHorizontalLabels=function shouldUseHorizontalLabels(){if(labelPosition){return labelPosition==='beside-icon';}if(!adaptive){return false;}if(layout.width>=768){var maxTabItemWidth=DEFAULT_MAX_TAB_ITEM_WIDTH;var flattenedStyle=StyleSheet.flatten(tabStyle);if(flattenedStyle){if(typeof flattenedStyle.width==='number'){maxTabItemWidth=flattenedStyle.width;}else if(typeof flattenedStyle.maxWidth==='number'){maxTabItemWidth=flattenedStyle.maxWidth;}}return routes.length*maxTabItemWidth<=layout.width;}else{var isLandscape=dimensions.width>dimensions.height;return isLandscape;}};return React.createElement(SafeAreaConsumer,null,function(insets){return React.createElement(Animated.View,{style:[styles.tabBar,{backgroundColor:colors.card,borderTopColor:colors.border},keyboardHidesTabBar?{transform:[{translateY:visible.interpolate({inputRange:[0,1],outputRange:[layout.height,0]})}],position:keyboardShown?'absolute':null}:null,{height:DEFAULT_TABBAR_HEIGHT+(insets?insets.bottom:0),paddingBottom:insets?insets.bottom:0},style],pointerEvents:keyboardHidesTabBar&&keyboardShown?'none':'auto'},React.createElement(View,{style:styles.content,onLayout:handleLayout},routes.map(function(route,index){var focused=index===state.index;var options=descriptors[route.key].options;var onPress=function onPress(){var event=navigation.emit({type:'tabPress',target:route.key,canPreventDefault:true});if(!focused&&!event.defaultPrevented){navigation.dispatch(_objectSpread({},CommonActions.navigate(route.name),{target:state.key}));}};var onLongPress=function onLongPress(){navigation.emit({type:'tabLongPress',target:route.key});};var label=options.tabBarLabel!==undefined?options.tabBarLabel:options.title!==undefined?options.title:route.name;var accessibilityLabel=options.tabBarAccessibilityLabel!==undefined?options.tabBarAccessibilityLabel:typeof label==='string'?\"\".concat(label,\", tab, \").concat(index+1,\" of \").concat(routes.length):undefined;return React.createElement(NavigationContext.Provider,{key:route.key,value:descriptors[route.key].navigation},React.createElement(NavigationRouteContext.Provider,{value:route},React.createElement(BottomTabItem,{route:route,focused:focused,horizontal:shouldUseHorizontalLabels(),onPress:onPress,onLongPress:onLongPress,accessibilityLabel:accessibilityLabel,testID:options.tabBarTestID,allowFontScaling:allowFontScaling,activeTintColor:activeTintColor,inactiveTintColor:inactiveTintColor,activeBackgroundColor:activeBackgroundColor,inactiveBackgroundColor:inactiveBackgroundColor,button:options.tabBarButton,icon:options.tabBarIcon,label:label,showIcon:showIcon,showLabel:showLabel,labelStyle:labelStyle,style:tabStyle})));})));});}var styles=StyleSheet.create({tabBar:{left:0,right:0,bottom:0,borderTopWidth:StyleSheet.hairlineWidth,elevation:8},content:{flex:1,flexDirection:'row'}});","map":{"version":3,"sources":["BottomTabBar.tsx"],"names":["DEFAULT_TABBAR_HEIGHT","DEFAULT_MAX_TAB_ITEM_WIDTH","useNativeDriver","Platform","adaptive","keyboardHidesTabBar","tabStyle","colors","useTheme","React","Dimensions","height","width","dimensions","Animated","routes","toValue","duration","handleOrientationChange","window","setDimensions","handleKeyboardShow","setKeyboardShown","handleKeyboardHide","finished","Keyboard","handleLayout","e","setLayout","layout","shouldUseHorizontalLabels","labelPosition","maxTabItemWidth","flattenedStyle","StyleSheet","isLandscape","insets","styles","backgroundColor","borderTopColor","border","transform","translateY","inputRange","outputRange","position","keyboardShown","paddingBottom","focused","index","state","options","descriptors","route","onPress","event","type","target","canPreventDefault","navigation","CommonActions","key","onLongPress","label","accessibilityLabel","tabBar","left","right","bottom","borderTopWidth","elevation","content","flex","flexDirection"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  View,\n  Animated,\n  StyleSheet,\n  Keyboard,\n  Platform,\n  LayoutChangeEvent,\n  ScaledSize,\n  Dimensions,\n} from 'react-native';\nimport {\n  NavigationContext,\n  NavigationRouteContext,\n  CommonActions,\n  useTheme,\n} from '@react-navigation/native';\nimport { SafeAreaConsumer } from 'react-native-safe-area-context';\n\nimport BottomTabItem from './BottomTabItem';\nimport { BottomTabBarProps } from '../types';\n\ntype Props = BottomTabBarProps & {\n  activeTintColor?: string;\n  inactiveTintColor?: string;\n};\n\nconst DEFAULT_TABBAR_HEIGHT = 50;\nconst DEFAULT_MAX_TAB_ITEM_WIDTH = 125;\n\nconst useNativeDriver = Platform.OS !== 'web';\n\nexport default function BottomTabBar({\n  state,\n  navigation,\n  descriptors,\n  activeBackgroundColor,\n  activeTintColor,\n  adaptive = true,\n  allowFontScaling,\n  inactiveBackgroundColor,\n  inactiveTintColor,\n  keyboardHidesTabBar = false,\n  labelPosition,\n  labelStyle,\n  showIcon,\n  showLabel,\n  style,\n  tabStyle,\n}: Props) {\n  const { colors } = useTheme();\n\n  const [dimensions, setDimensions] = React.useState(Dimensions.get('window'));\n  const [layout, setLayout] = React.useState({\n    height: 0,\n    width: dimensions.width,\n  });\n  const [keyboardShown, setKeyboardShown] = React.useState(false);\n\n  const [visible] = React.useState(() => new Animated.Value(1));\n\n  const { routes } = state;\n\n  React.useEffect(() => {\n    if (keyboardShown) {\n      Animated.timing(visible, {\n        toValue: 0,\n        duration: 200,\n        useNativeDriver,\n      }).start();\n    }\n  }, [keyboardShown, visible]);\n\n  React.useEffect(() => {\n    const handleOrientationChange = ({ window }: { window: ScaledSize }) => {\n      setDimensions(window);\n    };\n\n    const handleKeyboardShow = () => setKeyboardShown(true);\n\n    const handleKeyboardHide = () =>\n      Animated.timing(visible, {\n        toValue: 1,\n        duration: 250,\n        useNativeDriver,\n      }).start(({ finished }) => {\n        if (finished) {\n          setKeyboardShown(false);\n        }\n      });\n\n    Dimensions.addEventListener('change', handleOrientationChange);\n\n    if (Platform.OS === 'ios') {\n      Keyboard.addListener('keyboardWillShow', handleKeyboardShow);\n      Keyboard.addListener('keyboardWillHide', handleKeyboardHide);\n    } else {\n      Keyboard.addListener('keyboardDidShow', handleKeyboardShow);\n      Keyboard.addListener('keyboardDidHide', handleKeyboardHide);\n    }\n\n    return () => {\n      Dimensions.removeEventListener('change', handleOrientationChange);\n\n      if (Platform.OS === 'ios') {\n        Keyboard.removeListener('keyboardWillShow', handleKeyboardShow);\n        Keyboard.removeListener('keyboardWillHide', handleKeyboardHide);\n      } else {\n        Keyboard.removeListener('keyboardDidShow', handleKeyboardShow);\n        Keyboard.removeListener('keyboardDidHide', handleKeyboardHide);\n      }\n    };\n  }, [visible]);\n\n  const handleLayout = (e: LayoutChangeEvent) => {\n    const { height, width } = e.nativeEvent.layout;\n\n    setLayout(layout => {\n      if (height === layout.height && width === layout.width) {\n        return layout;\n      } else {\n        return {\n          height,\n          width,\n        };\n      }\n    });\n  };\n\n  const shouldUseHorizontalLabels = () => {\n    if (labelPosition) {\n      return labelPosition === 'beside-icon';\n    }\n\n    if (!adaptive) {\n      return false;\n    }\n\n    if (layout.width >= 768) {\n      // Screen size matches a tablet\n      let maxTabItemWidth = DEFAULT_MAX_TAB_ITEM_WIDTH;\n\n      const flattenedStyle = StyleSheet.flatten(tabStyle);\n\n      if (flattenedStyle) {\n        if (typeof flattenedStyle.width === 'number') {\n          maxTabItemWidth = flattenedStyle.width;\n        } else if (typeof flattenedStyle.maxWidth === 'number') {\n          maxTabItemWidth = flattenedStyle.maxWidth;\n        }\n      }\n\n      return routes.length * maxTabItemWidth <= layout.width;\n    } else {\n      const isLandscape = dimensions.width > dimensions.height;\n\n      return isLandscape;\n    }\n  };\n\n  return (\n    <SafeAreaConsumer>\n      {insets => (\n        <Animated.View\n          style={[\n            styles.tabBar,\n            {\n              backgroundColor: colors.card,\n              borderTopColor: colors.border,\n            },\n            keyboardHidesTabBar\n              ? {\n                  // When the keyboard is shown, slide down the tab bar\n                  transform: [\n                    {\n                      translateY: visible.interpolate({\n                        inputRange: [0, 1],\n                        outputRange: [layout.height, 0],\n                      }),\n                    },\n                  ],\n                  // Absolutely position the tab bar so that the content is below it\n                  // This is needed to avoid gap at bottom when the tab bar is hidden\n                  position: keyboardShown ? 'absolute' : null,\n                }\n              : null,\n            {\n              height: DEFAULT_TABBAR_HEIGHT + (insets ? insets.bottom : 0),\n              paddingBottom: insets ? insets.bottom : 0,\n            },\n            style,\n          ]}\n          pointerEvents={keyboardHidesTabBar && keyboardShown ? 'none' : 'auto'}\n        >\n          <View style={styles.content} onLayout={handleLayout}>\n            {routes.map((route, index) => {\n              const focused = index === state.index;\n              const { options } = descriptors[route.key];\n\n              const onPress = () => {\n                const event = navigation.emit({\n                  type: 'tabPress',\n                  target: route.key,\n                  canPreventDefault: true,\n                });\n\n                if (!focused && !event.defaultPrevented) {\n                  navigation.dispatch({\n                    ...CommonActions.navigate(route.name),\n                    target: state.key,\n                  });\n                }\n              };\n\n              const onLongPress = () => {\n                navigation.emit({\n                  type: 'tabLongPress',\n                  target: route.key,\n                });\n              };\n\n              const label =\n                options.tabBarLabel !== undefined\n                  ? options.tabBarLabel\n                  : options.title !== undefined\n                  ? options.title\n                  : route.name;\n\n              const accessibilityLabel =\n                options.tabBarAccessibilityLabel !== undefined\n                  ? options.tabBarAccessibilityLabel\n                  : typeof label === 'string'\n                  ? `${label}, tab, ${index + 1} of ${routes.length}`\n                  : undefined;\n\n              return (\n                <NavigationContext.Provider\n                  key={route.key}\n                  value={descriptors[route.key].navigation}\n                >\n                  <NavigationRouteContext.Provider value={route}>\n                    <BottomTabItem\n                      route={route}\n                      focused={focused}\n                      horizontal={shouldUseHorizontalLabels()}\n                      onPress={onPress}\n                      onLongPress={onLongPress}\n                      accessibilityLabel={accessibilityLabel}\n                      testID={options.tabBarTestID}\n                      allowFontScaling={allowFontScaling}\n                      activeTintColor={activeTintColor}\n                      inactiveTintColor={inactiveTintColor}\n                      activeBackgroundColor={activeBackgroundColor}\n                      inactiveBackgroundColor={inactiveBackgroundColor}\n                      button={options.tabBarButton}\n                      icon={options.tabBarIcon}\n                      label={label}\n                      showIcon={showIcon}\n                      showLabel={showLabel}\n                      labelStyle={labelStyle}\n                      style={tabStyle}\n                    />\n                  </NavigationRouteContext.Provider>\n                </NavigationContext.Provider>\n              );\n            })}\n          </View>\n        </Animated.View>\n      )}\n    </SafeAreaConsumer>\n  );\n}\n\nconst styles = StyleSheet.create({\n  tabBar: {\n    left: 0,\n    right: 0,\n    bottom: 0,\n    borderTopWidth: StyleSheet.hairlineWidth,\n    elevation: 8,\n  },\n  content: {\n    flex: 1,\n    flexDirection: 'row',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}