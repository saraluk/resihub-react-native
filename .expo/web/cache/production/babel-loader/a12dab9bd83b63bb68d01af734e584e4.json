{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Text from\"react-native-web/dist/exports/Text\";import SearchBar from\"../components/SearchBar\";import ApartmentCard from\"../components/ApartmentCard\";var data=require(\"../util/Data.json\");var list=require(\"../util/SavedList.json\");var SearchResultScreen=function(_Component){_inherits(SearchResultScreen,_Component);function SearchResultScreen(){var _getPrototypeOf2;var _this;_classCallCheck(this,SearchResultScreen);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SearchResultScreen)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={apartments:data.apartments,filteredList:[],mainArea:\"\",savedList:list.savedApartment,searchText:\"\",mainAreaList:[]};_this.handleToggle=function(apartmentId){var apartment=_this.state.filteredList.find(function(apartment){return apartment.id==apartmentId;});apartment[\"isSaved\"]=!apartment[\"isSaved\"];if(apartment[\"isSaved\"]==true){list.savedApartment.push(apartment);_this.setState({savedList:list.savedApartment});console.log(_this.state.savedList.length);}else{list[\"savedApartment\"]=list.savedApartment.filter(function(apartment){return apartment.id!==apartmentId;});_this.setState(function(){return{savedList:list.savedApartment};});}};_this.handleSearch=function(text){var match=_this.state.mainAreaList.filter(function(apt){return apt.subArea.toLowerCase().includes(text.toLowerCase());});_this.setState({searchText:text,filteredList:match});};return _this;}_createClass(SearchResultScreen,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.route.params;var mainAreaId=params.key;var mainAreaName=params.mainArea;var filtered;if(mainAreaId!=null){filtered=this.state.apartments.filter(function(apartment){return apartment.mainAreaId==mainAreaId;});console.log(filtered);}else{filtered=this.state.apartments;}this.setState({filteredList:filtered,mainArea:mainAreaName,mainAreaList:filtered});}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(View,{style:styles.container},React.createElement(SearchBar,{mainArea:this.state.mainArea,results:this.state.filteredList.length,handleSearch:this.handleSearch,searchText:this.state.searchText}),React.createElement(ScrollView,null,this.state.filteredList.length>0&&this.state.filteredList.map(function(apartment){return React.createElement(ApartmentCard,{key:apartment.id,apartmentObject:apartment,isSaved:apartment[\"isSaved\"],handleToggle:_this2.handleToggle,onPress:function onPress(){return _this2.props.navigation.navigate(\"ApartmentDetailScreen\",{key:apartment.id});}});})));}}]);return SearchResultScreen;}(Component);export{SearchResultScreen as default};var styles=StyleSheet.create({container:{flex:1,backgroundColor:\"#ffffff\"}});","map":{"version":3,"sources":["/Users/saraluk/Documents/Firebase/resihub-react-native/screens/SearchResultScreen.js"],"names":["React","Component","SearchBar","ApartmentCard","data","require","list","SearchResultScreen","state","apartments","filteredList","mainArea","savedList","savedApartment","searchText","mainAreaList","handleToggle","apartmentId","apartment","find","id","push","setState","console","log","length","filter","handleSearch","text","match","apt","subArea","toLowerCase","includes","params","props","route","mainAreaId","key","mainAreaName","filtered","styles","container","map","navigation","navigate","StyleSheet","create","flex","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { StyleSheet, View, ScrollView, Text } from \"react-native\";\nimport SearchBar from \"../components/SearchBar\";\nimport ApartmentCard from \"../components/ApartmentCard\";\n\nconst data = require(\"../util/Data.json\");\nconst list = require(\"../util/SavedList.json\");\n\nexport default class SearchResultScreen extends Component {\n  state = {\n    apartments: data.apartments,\n    filteredList: [],\n    mainArea: \"\",\n    savedList: list.savedApartment,\n    searchText: \"\",\n    mainAreaList: [],\n  };\n\n  componentDidMount() {\n    const params = this.props.route.params;\n    const mainAreaId = params.key;\n    const mainAreaName = params.mainArea;\n    let filtered;\n    if (mainAreaId != null) {\n      filtered = this.state.apartments.filter((apartment) => {\n        return apartment.mainAreaId == mainAreaId;\n      });\n      console.log(filtered);\n    } else {\n      filtered = this.state.apartments;\n    }\n    this.setState({\n      filteredList: filtered,\n      mainArea: mainAreaName,\n      mainAreaList: filtered,\n    });\n  }\n\n  handleToggle = (apartmentId) => {\n    const apartment = this.state.filteredList.find(\n      (apartment) => apartment.id == apartmentId\n    );\n    apartment[\"isSaved\"] = !apartment[\"isSaved\"];\n    if (apartment[\"isSaved\"] == true) {\n      list.savedApartment.push(apartment);\n      this.setState({\n        savedList: list.savedApartment,\n      });\n      console.log(this.state.savedList.length);\n    } else {\n      list[\"savedApartment\"] = list.savedApartment.filter(\n        (apartment) => apartment.id !== apartmentId\n      );\n      this.setState(() => ({\n        savedList: list.savedApartment,\n      }));\n    }\n  };\n\n  handleSearch = (text) => {\n    let match = this.state.mainAreaList.filter(function (apt) {\n      return apt.subArea.toLowerCase().includes(text.toLowerCase());\n    });\n\n    this.setState({\n      searchText: text,\n      filteredList: match,\n    });\n  };\n\n  render() {\n    return (\n      <View style={styles.container}>\n        <SearchBar\n          mainArea={this.state.mainArea}\n          results={this.state.filteredList.length}\n          handleSearch={this.handleSearch}\n          searchText={this.state.searchText}\n        ></SearchBar>\n        <ScrollView>\n          {this.state.filteredList.length > 0 &&\n            this.state.filteredList.map((apartment) => (\n              <ApartmentCard\n                key={apartment.id}\n                apartmentObject={apartment}\n                isSaved={apartment[\"isSaved\"]}\n                handleToggle={this.handleToggle}\n                onPress={() =>\n                  this.props.navigation.navigate(\"ApartmentDetailScreen\", {\n                    key: apartment.id,\n                  })\n                }\n              />\n            ))}\n        </ScrollView>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#ffffff\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}